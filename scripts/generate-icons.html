<!DOCTYPE html>
<html>
<head>
    <title>Icon Generator</title>
</head>
<body>
    <h1>Nous App Icon Generator</h1>
    <p>Click the button below to generate and download all required app icons:</p>
    <button id="generateBtn" style="padding: 12px 24px; font-size: 16px; background: #5d6b86; color: white; border: none; border-radius: 8px; cursor: pointer;">Generate Icons</button>
    <div id="status" style="margin-top: 20px;"></div>
    <div id="preview" style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;"></div>

    <svg id="logoSvg" style="display: none;" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
        <style>
            text {
                font-family: Satoshi, sans-serif;
                font-weight: 300;
                font-size: 72px;
                fill: #5d6b86;
            }
        </style>
        <circle cx='50' cy='50' r='35' fill='none' stroke='#000000' stroke-width='3'/>
        <text x='50' y='72' text-anchor='middle' letter-spacing='1.5'>n</text>
    </svg>

    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];

        document.getElementById('generateBtn').addEventListener('click', generateIcons);

        async function generateIcons() {
            const statusDiv = document.getElementById('status');
            const previewDiv = document.getElementById('preview');
            statusDiv.innerHTML = '<p>Generating icons...</p>';
            previewDiv.innerHTML = '';

            const svg = document.getElementById('logoSvg');
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const svgUrl = URL.createObjectURL(svgBlob);

            for (const size of sizes) {
                try {
                    const canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    const ctx = canvas.getContext('2d');

                    // Fill with background color
                    ctx.fillStyle = '#f8f9fb';
                    ctx.fillRect(0, 0, size, size);

                    const img = new Image();
                    await new Promise((resolve, reject) => {
                        img.onload = resolve;
                        img.onerror = reject;
                        img.src = svgUrl;
                    });

                    ctx.drawImage(img, 0, 0, size, size);

                    // Convert to blob and download
                    canvas.toBlob((blob) => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `icon-${size}x${size}.png`;
                        a.click();
                        URL.revokeObjectURL(url);

                        // Add preview
                        const container = document.createElement('div');
                        container.style.textAlign = 'center';
                        const previewImg = document.createElement('img');
                        previewImg.src = url;
                        previewImg.style.width = '100px';
                        previewImg.style.height = '100px';
                        previewImg.style.border = '1px solid #ddd';
                        const label = document.createElement('div');
                        label.textContent = `${size}x${size}`;
                        label.style.marginTop = '5px';
                        container.appendChild(previewImg);
                        container.appendChild(label);
                        previewDiv.appendChild(container);
                    });

                    statusDiv.innerHTML += `<p>✓ Generated ${size}x${size}</p>`;
                } catch (error) {
                    statusDiv.innerHTML += `<p>✗ Failed to generate ${size}x${size}: ${error.message}</p>`;
                }
            }

            URL.revokeObjectURL(svgUrl);
            statusDiv.innerHTML += '<p><strong>Done! Save all downloaded icons to the /icons folder.</strong></p>';
        }
    </script>
</body>
</html>
