<!DOCTYPE html>
<html>
<head>
    <title>Firebase Test</title>
</head>
<body>
    <h1>Firebase Connection Test</h1>
    <div id="status">Testing...</div>
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, Timestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAk5qHtY3Y_988RBWprbKMiiRc63IECsbg",
            authDomain: "study-d2678.firebaseapp.com",
            projectId: "study-d2678",
            storageBucket: "study-d2678.firebasestorage.app",
            messagingSenderId: "531881111589",
            appId: "1:531881111589:web:4f3acc170683d154210fcc",
            measurementId: "G-W95VY7VVSX"
        };

        try {
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
            
            document.getElementById('status').innerHTML = 'Firebase initialized ✅<br>';
            
            // Try anonymous sign in
            await signInAnonymously(auth);
            document.getElementById('status').innerHTML += 'Anonymous sign-in successful ✅<br>';
            document.getElementById('status').innerHTML += `User ID: ${auth.currentUser.uid}<br>`;
            
            // Try adding a test document
            const testCol = collection(db, 'test-collection');
            await addDoc(testCol, {
                message: 'Hello Firebase!',
                timestamp: Timestamp.now()
            });
            document.getElementById('status').innerHTML += 'Test document added ✅<br>';
            document.getElementById('status').innerHTML += '<strong>Everything works! The issue might be in the main app.</strong>';
            
        } catch (error) {
            document.getElementById('status').innerHTML = `❌ Error: ${error.message}`;
            console.error('Firebase test error:', error);
        }
    </script>
</body>
</html>
