<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nous</title>

    <!-- PWA Meta Tags -->
    <meta name="description" content="A modern study habit tracker and time management app">
    <meta name="theme-color" content="#5d6b86">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Nous">
    <link rel="manifest" href="/manifest.json">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/icon-192x192.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cstyle%3Etext%7Bfont-family:Satoshi,sans-serif;font-weight:300;font-size:72px;fill:%235d6b86%7D%3C/style%3E%3Ccircle cx='50' cy='50' r='35' fill='none' stroke='%23000000' stroke-width='3'/%3E%3Ctext x='50' y='72' text-anchor='middle' letter-spacing='1.5'%3En%3C/text%3E%3C/svg%3E">

    <!-- Resource Hints for Performance -->
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://api.fontshare.com" crossorigin>
    <link rel="dns-prefetch" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://www.gstatic.com">
    <link rel="dns-prefetch" href="https://api.fontshare.com">

    <!-- Satoshi font -->
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@300,400,500,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <!-- Firebase Configuration - Must load first -->
    <script src="config.js?v=6&t=1730429400"></script>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import {
            getAuth,
            onAuthStateChanged,
            signInAnonymously,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signOut,
            signInWithCustomToken,
            signInWithPopup,
            GoogleAuthProvider
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import {
            getFirestore,
            collection,
            addDoc,
            doc,
            getDoc,
            onSnapshot,
            query,
            where,
            setDoc,
            updateDoc,
            deleteDoc,
            Timestamp,
            getDocs,
            writeBatch,
            serverTimestamp
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import {
            getFunctions,
            httpsCallable
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js';

        // Make Firebase functions globally available
        window.initializeApp = initializeApp;
        window.getAuth = getAuth;
        window.onAuthStateChanged = onAuthStateChanged;
        window.signInAnonymously = signInAnonymously;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.signOut = signOut;
        window.signInWithCustomToken = signInWithCustomToken;
        window.signInWithPopup = signInWithPopup;
        window.GoogleAuthProvider = GoogleAuthProvider;
        window.getFirestore = getFirestore;
        window.collection = collection;
        window.addDoc = addDoc;
        window.doc = doc;
        window.getDoc = getDoc;
        window.onSnapshot = onSnapshot;
        window.query = query;
        window.where = where;
        window.setDoc = setDoc;
        window.updateDoc = updateDoc;
        window.deleteDoc = deleteDoc;
        window.Timestamp = Timestamp;
        window.getDocs = getDocs;
        window.writeBatch = writeBatch;
        window.serverTimestamp = serverTimestamp;
        window.getFunctions = getFunctions;
        window.httpsCallable = httpsCallable;

        // Signal that Firebase SDK is ready
        window.firebaseSDKReady = true;
        window.dispatchEvent(new Event('firebaseReady'));

        // Firebase configuration is loaded from config.js
        // If config.js is not found, the app will show an error
    </script>
</head>
<body>
    <!-- TEMPORARY: Disable service worker for testing tree changes -->
    <script>
        // Unregister ALL service workers to force fresh cache
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for (let registration of registrations) {
                    registration.unregister();
                    console.log('üîÑ Service worker unregistered for testing');
                }
            });
        }

        // Clear all caches
        if ('caches' in window) {
            caches.keys().then(function(names) {
                for (let name of names) {
                    caches.delete(name);
                    console.log('üóëÔ∏è Cleared cache:', name);
                }
            });
        }
    </script>

    <div id="root"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>

    <script src="index.js?v=7&t=1730429400"></script>
</body>
</html>